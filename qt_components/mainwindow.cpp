#include "mainwindow.h"
#include "ui_mainwindow.h"

#include "AVQtWidgets/qrotarymenuentry.h"
#include <QLabel>
#include "AVQtWidgets/qcircularkeyboard.h"
#include "AVQtWidgets/RotaryMenuEntries/qtestmenuentry.h"

#include "AVQtWidgets/qrotarymenu.h"
#include "AVQtWidgets/clock.h"
#include "AVQtWidgets/simplemediaplayer.h"
#include "AVQtWidgets/splash.h"
#include "AVQtWidgets/compass.h"
#include "AVQtWidgets/getdata.h"
#include "AVQtWidgets/radarscope.h"
#include "AVQtWidgets/flightboard.h"
#include "AVQtWidgets/oscope.h"
#include "AVQtWidgets/RotaryMenuEntries/qclockmenuentry.h"

QWidget* primary_control;

MainWindow::MainWindow(QWidget* parent)
    : QMainWindow(parent)
    , ui(new Ui::MainWindow)
{
    setMinimumSize(480,480);
    // setAttribute(Qt::WA_TranslucentBackground);

    ui->setupUi(this);
    // getData* getdata = new getData(this);
    // getdata->start();

    // Clock* clockW = new Clock(this);
    // compass* compassW = new compass(this);
    // simplemediaplayer* mediaPlayer = new simplemediaplayer();
    // splash* splashScreen = new splash();
    // radarscope* radar = new radarscope();

    // connect(radar, SIGNAL(callData()),getdata, SLOT(onReqAirSpace()));
    // connect(getdata, SIGNAL(givePlane(QList<aircraft>)),radar, SLOT(setTraffic(QList<aircraft>)));
    // connect(radar, SIGNAL(setPixToMiles(float)),getdata, SLOT(setPtoM(float)));
    // connect(radar, SIGNAL(getGPS()),getdata, SLOT(giveGPS()));
    // connect(getdata, SIGNAL(updateGPS(gpsCord)),radar, SLOT(scopeGPS(gpsCord)));
    // QList<QChar> characters = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'};
    //
    // QCircularKeyboard* circular_keyboard = new QCircularKeyboard(characters, this);
    // primary_control = circular_keyboard;
    // this->installEventFilter(circular_keyboard);


    // Create a menu entry instance. It should know it's parent (in this case the main menu) and the display for the entry.
    QClockMenuEntry* clock_entry = new QClockMenuEntry(this, "Clock");
    QTestMenuEntry* entry2 = new QTestMenuEntry(this, "Entry 2");
    QTestMenuEntry* entry3 = new QTestMenuEntry(this, "Entry 3");
    QTestMenuEntry* entry4 = new QTestMenuEntry(this, "Entry 4");
    QTestMenuEntry* entry5 = new QTestMenuEntry(this, "Entry 5");
    QTestMenuEntry* entry6 = new QTestMenuEntry(this, "Entry 6");
    QTestMenuEntry* entry7 = new QTestMenuEntry(this, "Entry 7");
    // QRotaryMenu expects this list of the entries, this way is done just for organization.
    QList<QRotaryMenuEntry*> rotary_menu_entries;
    rotary_menu_entries.append(clock_entry);
    rotary_menu_entries.append(entry2);
    rotary_menu_entries.append(entry3);
    rotary_menu_entries.append(entry4);
    rotary_menu_entries.append(entry5);
    rotary_menu_entries.append(entry6);
    rotary_menu_entries.append(entry7);
    QRotaryMenu* rotary_menu = new QRotaryMenu(
        rotary_menu_entries,
        this,
        50,
        60
        );
    // primary_control is used to determine if a GUI should action on the key_presses it gets.
    // GUIs may or may not remain in memory when closed and there may be some necessary global key presses.
    // This allows for those cases as long as the GUIs implement and use this scheme. Example in QRotaryMenu eventFilter.
    primary_control = rotary_menu;
    // Forward event signals to the rotary_menu that are caught by the main window.
    this->installEventFilter(rotary_menu);

    // The rotary menu instance is actually what needs to be given control back to, not the main menu.
    // Using this scheme we just tell the new widget where to return control to.
    clock_entry->set_return_to(rotary_menu);

    // labels.append(ui->labelOption1); // Example for referencing a label generated by .ui.

}

MainWindow::~MainWindow() {
    delete ui;
}

